## Async Behaviour with Callbacks

- Interview question to see, if you know the basics of JavaScript.

```js
console.log("Hello, World!");
setTimeout(function exec() {
	console.log("Timer done");
}, 0);
console.log("end");

// Hello, World!
// end
// Timer done
```

- Considering, `console.log()` works as sync - we'll have o/p as above. Otherwise it will be treated as async feature.
- Any async code cannot hamper the sync code.

```js
console.log("Hello, World!");
setTimeout(function exec() {
	console.log("Timer done");
}, 0);
for(let i=0;i<100000000; i++) {
	// some task
}
console.log("end");

// Hello, World!
// end
// Timer done
```

- `console.log()` 
	- How `console.log()` works is largely dependent on the runtime.
	- It is not a core JS feature.
	- How does `NodeJS` handles `console.log()`
		- Prints to stdout with newline. Multiple arguments can be passed, with the first used as the primary message and all additional used as substitution values similar to `printf(3)` (the arguments are all passed to `utill.format())`).
	- Implementation of `console.log()`
		- [node-v0.x-archive/console.js at master · nodejs/node-v0.x-archive · GitHub](https://github.com/nodejs/node-v0.x-archive/blob/master/lib/console.js)
	- `process.stdout.fd`
		- process. stdout and process. stderr differ from other Node.js streams in important ways:
		- They are used internally by `console.log()` and `console.error()`, respectively.
		- Writes may be synchronous depending on what the stream is connected to and whether the system is Windows or POSIX: 
			- Files: synchronous on Windows and POSIX 
			- TTYs (Terminals): asynchronous on Windows, synchronous on POSIX
			• Pipes (and sockets): synchronous on Windows, asynchronous on POSIX
		Warning: Synchronous writes block the event loop until the write has completed.
		Read - [Process | Node.js v19.6.0 Documentation](https://nodejs.org/api/process.html#processstdout)
		Read - [Timers in Node.js | Node.js](https://nodejs.org/en/docs/guides/timers-in-node/)
	- What are Streams?
		- Streams are one of the fundamental concepts that power Node.js applications. They are data-handling method and are used to read or write input into output sequentially.
		- What makes streams unique, is that instead of a program reading a file into memory **all at once** like in the traditional way, streams read chunks of data piece by piece, processing its content without keeping it all in memory.
		- Read - [Understanding Streams in Node.js - NodeSource](https://nodesource.com/blog/understanding-streams-in-nodejs/)
	- What is POSIX?
		- POSIX (Portable Operating System Interface) is a set of standard operating system [interfaces](https://www.techtarget.com/whatis/definition/interface) based on the [Unix](https://www.techtarget.com/searchdatacenter/definition/Unix) operating system. The most recent POSIX specifications -- IEEE Std 1003.1-2017 -- defines a standard interface and environment that can be used by an operating system ([OS](https://www.techtarget.com/whatis/definition/operating-system-OS)) to provide access to POSIX-compliant applications. The standard also defines a command interpreter ([shell](https://www.techtarget.com/searchdatacenter/definition/shell)) and common [utility](https://www.techtarget.com/whatis/definition/utility) programs. POSIX supports application [portability](https://www.techtarget.com/searchstorage/definition/portability) at the [source code](https://www.techtarget.com/searchapparchitecture/definition/source-code) level so applications can be built to run on any POSIX-compliant OS.
	- What is Streaming Data?
		- Streaming data is data that is continuously generated by different sources. Such data should be processed incrementally using stream processing techniques without having access to all of the data.
	- What is a TTY Terminal?
		- [Difference Between a Terminal, Shell, TTY, and Console | Baeldung on Linux](https://www.baeldung.com/linux/terminal-shell-tty-vs-console)

```js
console.log("Hello, World!");
setTimeout(function exec() {
	console.log("Timer done");
	setTimeout(function exec() {
		console.log("woah another one");
	}, 10);
}, 0);

for(let i=0;i<100000000; i++) {
	// some task
}
console.log("end");

// Hello, World!
// end
// Timer done
// another one
```

- `setInterval()`
	- returns a number in chrome
	- returns an object in node runtime
- `clearInterval()`
- Function with same name might behave differently in different runtimes.